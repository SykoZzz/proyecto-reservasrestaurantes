@model appReservas.Models.Restaurante

@{
    ViewData["Title"] = "Detalles";
    var apiKey = ViewData["GoogleMapsApiKey"]?.ToString();
}

<!-- Imagen de portada -->
<div class="position-relative" style="height: 80vh; overflow: hidden;">
    <img src="@Model.ImagenUrl" class="w-100 h-100" style="object-fit: cover;" alt="@Model.Nombre" />
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background: rgba(0,0,0,0.4);"></div>

    <div class="position-absolute top-50 start-50 translate-middle text-center text-white">
        <h1 class="display-4 fw-bold">@Model.Nombre</h1>
        <p class="fs-5">
            ‚≠ê @Model.Rating &nbsp; | &nbsp; üí∞ S/. @Model.PrecioPromedio &nbsp; | &nbsp; üçΩ @Model.Tipo
        </p>
        <a href="#reservaSection" class="btn btn-warning btn-lg mt-3">üìÖ Reservar Mesa</a>
    </div>
</div>

<!-- Secci√≥n sobre el restaurante -->
<section class="container py-5" id="reservaSection">
    <div class="row mb-5">
        <div class="col-md-8 mx-auto text-center">
            <h2 class="fw-bold mb-3">Sobre @Model.Nombre</h2>
            <p class="text-muted fs-5">
                Bienvenido a @Model.Nombre, donde ofrecemos platos deliciosos y experiencias gastron√≥micas √∫nicas en @Model.Distrito.
            </p>
        </div>
    </div>

    <!-- Mapa del restaurante -->
    <div class="row justify-content-center mb-5">
        <div class="col-md-10">
            <div id="map" style="height:400px;width:100%;" class="shadow-sm rounded-4"></div>
        </div>
    </div>

    <!-- Formulario de reserva -->
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-lg p-4 rounded-4">
                <h3 class="fw-bold mb-4 text-center">Hacer una Reserva</h3>
                <form asp-action="Create" asp-controller="Reservas" method="post">
                    <input type="hidden" name="restauranteId" value="@Model.Id" />

                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="nombre" name="Nombre" required>
                    </div>

                    <div class="mb-3">
                        <label for="telefono" class="form-label">Tel√©fono</label>
                        <input type="text" class="form-control" id="telefono" name="Telefono" required>
                    </div>

                    <div class="mb-3">
                        <label for="fecha" class="form-label">Fecha</label>
                        <input type="date" class="form-control" id="fecha" name="Fecha" required>
                    </div>

                    <div class="mb-3">
                        <label for="hora" class="form-label">Hora</label>
                        <input type="time" class="form-control" id="hora" name="Hora" required>
                    </div>

                    <div class="mb-3">
                        <label for="personas" class="form-label">N√∫mero de Personas</label>
                        <input type="number" class="form-control" id="personas" name="Personas" min="1" required>
                    </div>

                    <button type="submit" class="btn btn-warning w-100 fw-bold">üìÖ Reservar</button>
                </form>
            </div>
        </div>
    </div>
</section>

@section Scripts{
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=@apiKey&callback=initMap">
    </script>

    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 16,
                center: { lat: @Model.Latitude, lng: @Model.Longitude }
            });

            var marker = new google.maps.Marker({
                position: { lat: @Model.Latitude, lng: @Model.Longitude },
                map: map,
                title: "@Model.Nombre"
            });
        }

        // Scroll suave para reservas
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
}
